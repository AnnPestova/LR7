{% extends 'base.html.twig' %}

{% block title %}Вопрос{% endblock %}

{% block body %}

    <nav class="navbar navbar-expand-lg navbar-light bg-light p-3">
        <div class="container">
            <a class="navbar-brand" href="/">QA</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent"
                    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                </ul>
                <form class="d-flex">
                    <button class="btn btn-outline-danger me-3" type="submit">Авторизация</button>
                    <button class="btn btn-outline-success" type="submit">Регистрация</button>
                </form>
            </div>
        </div>
    </nav>

    <div class="container mt-5">
        <h2 class="fw-bolder">{{ q.title ~ ' ' }}<span class="badge bg-secondary">{{ q.date|date('d.m.Y') }}</span></h2>
        <h3 class="fw-normal"><span class="fw-bold">Категория: </span>{{ q.category }}</h3>
        <h3 class="fw-normal"><span class="fw-bold">Автор: </span>{{ q.name }}</h3>
        <p class="lh-lg fs-5">{{ q.text }}</p>

        <div class="mb-3 mt-3">
            <label for="exampleFormControlTextarea1" class="form-label">Оставьте свой ответ: </label>
            <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
            <input type="submit" class="btn btn-warning mt-3" value="Отправить ответ">
        </div>


        <div class="mb-3 mt-3">
            {% for a in answers %}
                {% if a.answer_id == null %}
                    <div class="card text-dark bg-light mb-3">
                        <div class="card-header">{{ 'Этот ответ помог уже: ' ~ a.rightness ~ '.' }}</div>
                        <div class="card-body">
                            <h5 class="card-title">{{ a.author ~ ', (' ~ a.date|date('d.m.Y, в H:m') ~ ')' }}</h5>
                            <p class="card-text">{{ a.text }}</p>
                        </div>
                        <div>
                            <a class="btn btn-warning me-3">Это мне помогло</a>
                            <a class="btn btn-warning">Ответить</a>
                        </div>
                    </div>
                {% else %}
                    <div style="margin-left: 100px;" class="card text-dark bg-light mb-3">
                        <div class="card-header">{{ 'Этот ответ помог уже: ' ~ a.rightness ~ '.' }}</div>
                        <div class="card-body">
                            <h5 class="card-title">{{ a.author ~ ', (' ~ a.date|date('d.m.Y, в H:m') ~ ')' }}</h5>
                            <p class="card-text">{{ a.text }}</p>
                        </div>
                        <div>
                            <a class="btn btn-warning me-3">Это мне помогло</a>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>

    <div class="container">
        <footer class="py-3 my-4">
            <ul class="nav justify-content-center border-bottom pb-3 mb-3">
                <li class="nav-item"><a href="/" class="nav-link px-2 text-muted">Пестова Анна</a></li>
                <li class="nav-item"><a href="/" class="nav-link px-2 text-muted">Миронова Злата</a></li>
                <li class="nav-item"><a href="#" class="nav-link px-2 text-muted">ПМ-19-1</a></li>
            </ul>
            <p class="text-center text-muted">© 2022 год.</p>
        </footer>
    </div>
{% endblock %}
